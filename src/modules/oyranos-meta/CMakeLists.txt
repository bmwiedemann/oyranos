# --- meta modules ---
SET( OY_MODULE oyIM )
SET( MODULE_EXTRA_LIBS ${EXTRA_LIBS} )
SET( OY_MODULE_LIB ${PACKAGE_NAME}_${OY_MODULE}${OY_MODULE_NAME} )
IF(ENABLE_SHARED_LIBS_${PROJECT_UP_NAME})
  ADD_LIBRARY( ${OY_MODULE_LIB}
               SHARED
               ${PACKAGE_NAME}_cmm_${OY_MODULE}.c
               ${PACKAGE_NAME}_cmm_${OY_MODULE}_meta_c.c
               ${PACKAGE_NAME}_cmm_${OY_MODULE}_profile.c)
  #SET( EXTRA_LIBS ${EXTRA_LIBS} ${YAJL_LIBRARIES} )
  TARGET_LINK_LIBRARIES ( ${OY_MODULE_LIB} ${PROJECT_NAME} ${MODULE_EXTRA_LIBS} )
  INSTALL (TARGETS ${OY_MODULE_LIB} DESTINATION ${CMAKE_INSTALL_LIBDIR}/${OY_METASUBPATH})
ENDIF(ENABLE_SHARED_LIBS_${PROJECT_UP_NAME})

IF(ENABLE_STATIC_LIBS_${PROJECT_UP_NAME})
  SET( SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/${PACKAGE_NAME}_cmm_${OY_MODULE}.c
               ${CMAKE_CURRENT_SOURCE_DIR}/${PACKAGE_NAME}_cmm_${OY_MODULE}_meta_c.c
               ${CMAKE_CURRENT_SOURCE_DIR}/${PACKAGE_NAME}_cmm_${OY_MODULE}_profile.c )
  #  ADD_LIBRARY( ${OY_MODULE_LIB}-static STATIC ${SOURCES} )
  SET( SOURCES_STATIC ${SOURCES_STATIC} ${SOURCES} PARENT_SCOPE )
  #  TARGET_LINK_LIBRARIES ( ${OY_MODULE_LIB}-static ${PACKAGE_NAME}-static ${MODULE_EXTRA_LIBS} )
  SET( OY_MODULE_STATIC ${OY_MODULE_STATIC} ${OY_MODULE_LIB}-static )
ENDIF(ENABLE_STATIC_LIBS_${PROJECT_UP_NAME})

SET( OY_MODULE_STATIC ${OY_MODULE_STATIC} PARENT_SCOPE )
